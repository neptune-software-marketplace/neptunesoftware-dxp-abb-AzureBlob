{
	"id": "7f7b8550-466b-ed11-9f60-000d3aba46be",
	"createdAt": "2022-11-23T15:48:56.683Z",
	"createdBy": "carlos.pires@neptune-software.com",
	"globalScripts": [],
	"externalModules": [
		{
			"id": "F536BC1F-B72D-ED11-BD6E-E42AAC618FDD",
			"name": "@azure/storage-blob",
			"contextname": "azurestorageblob",
			"path": "/home/planet9/ext-disk/npm-serverscript/node_modules/@azure/storage-blob"
		}
	],
	"entitySets": [],
	"apis": [],
	"name": "Upload",
	"ver": "22.11.23.1557",
	"description": null,
	"content": [
		"==OBJECT STRING==",
		"complete({",
		"    uploadBlob: uploadBlob,",
		"});",
		"",
		"",
		"async function uploadBlob(params) {",
		"    const blob = modules.azurestorageblob;",
		"",
		"    try {",
		"",
		"        if (params.account === undefined || params.account === null || params.account === \"\") throw \"Account is missing!\";",
		"        if (params.accountKey === undefined || params.accountKey === null || params.accountKey === \"\") throw \"Access Key is missing!\";",
		"        if (params.container === undefined || params.container === null || params.container === \"\") throw \"Container is missing!\";",
		"        if (params.blobName === undefined || params.blobName === null || params.blobName === \"\") throw \"File name is missing!\";",
		"",
		"        const sharedKeyCredential = new blob.StorageSharedKeyCredential(params.account, params.accountKey);",
		"        const blobServiceClient = new blob.BlobServiceClient(`https://${params.account}.blob.core.windows.net`, sharedKeyCredential);",
		"        const containerClient = blobServiceClient.getContainerClient(params.container);",
		"        const blockBlobClient = containerClient.getBlockBlobClient(params.blobName);",
		"",
		"        const result = await blockBlobClient.upload(params.buffer, params.buffer.length, { blobHTTPHeaders: { blobContentType: params.contentType }, metadata: params.metadata });",
		"",
		"        return result;",
		"",
		"    } catch (e) {",
		"        log.error(\"Azure Blob Upload: \" + e);",
		"        return false;",
		"    }",
		"}"
	],
	"useAsGlobalScript": true,
	"isTypescript": false,
	"transpiledContent": null,
	"lastRunSuccessful": false,
	"jsscriptGroup": "910f112a-466b-ed11-9f60-000d3aba46be",
	"package": "a83ed26f-446b-ed11-9f60-000d3aba46be"
}